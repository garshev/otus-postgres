Домашнее задание

Нагрузочное тестирование и тюнинг PostgreSQL

Цель:

сделать нагрузочное тестирование PostgreSQL

настроить параметры PostgreSQL для достижения максимальной производительности

• сделать проект ---10

• сделать инстанс Google Cloud Engine типа e2-medium с ОС Ubuntu 20.04

• поставить на него PostgreSQL 13 из пакетов собираемых postgres.org

• настроить кластер PostgreSQL 13 на максимальную производительность не 
обращая внимание на возможные проблемы с надежностью в случае
аварийной перезагрузки виртуальной машины

• нагрузить кластер через утилиту
https://github.com/Percona-Lab/sysbench-tpcc (требует установки
https://github.com/akopytov/sysbench)

• написать какого значения tps удалось достичь, показать какие параметры в
какие значения устанавливали и почему

    shared_buffers = 900MB    # четверть свободной памяти
    work_mem = 4 MB           # по умолчанию, при увеличении небыло разницы
    effective_cache_size = 2560MB # примерный кеш ОС
    
    wal_level = minimal       # сдесь и далее для уменьшения нагрузки на диск
    fsync = off               
    synchronous_commit = off  
    full_page_writes = off
    wal_init_zero = off
    
    TPS по сравнению со стандартным конфигом увеличился со 140 до 160.
    
